<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html" charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Tree - Gia Phả</title>
    <script src="family.js" type="text/javascript"></script>
    <script src="data.js"></script>
    <script src="giaphascript.js"></script>
    <script src="loadingmenu.js"></script> <!-- Ensure navbar loads -->
    <link rel="stylesheet" href="homestyle.css">
    <link rel="stylesheet" href="giaphastyle.css">
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
</head>
<body>
    <div id="navbar"></div> <!-- Changed from nav-bar to navbar -->
    <div><h3>Enter password to view the family tree</h3></div>
    <div id="login-panel">
        <p>Nhập mật khẩu để xem gia phả:</p>
        <input type="password" id="password-input" onkeydown="if (event.key === 'Enter') checkPassword()">
        <button onclick="checkPassword()">Submit</button>
        <div id="subtree-input" style="display: none;">
            <p>Or enter a Person ID for a subtree:</p>
            <input type="number" id="person-id" placeholder="Person ID" min="0">
            <button onclick="loadSubtree()">Load Subtree</button>
        </div>
    </div>
    <div id="control-panel" style="display: none;">
        <div id="panel-top">
            <span>Family tree of <b><span id="root-name"></span></b></span>
            <span>and
                <select id="detail-picker" onchange="updateDetail()">
                    <option value="0">descendants, ancestors</option>
                    <option value="1">descendants, ancestors + their children, siblings</option>
                    <option value="2">descendants, ancestors + their grandchildren, cousins, nieces/nephews</option>
                    <option value="3">descendants, ancestors + their great-grandchildren, 2nd cousins</option>
                    <option value="Infinity" selected="selected">descendants, ancestors + all descendants of ancestors</option>
                    <option value="Everyone">everyone</option>
                </select>
            </span>
            <span id="tree-information"></span>
        </div>
        <div id="panel-bottom">
            <div id="info-pane-placeholder">
                <i>Hover your mouse on a person with <img src="info-icon.png" height="12px"> for their information</i>
            </div>
            <div id="info-pane" style="display: none">About <i><span id="info-pane-name"></span></i>:
                <span id="info-pane-details"></span>
            </div>
        </div>
    </div>
    <div id="tree-content" style="display: none;">
        <div id="tree-container">
            <div id="subtree-form">
                <input type="number" id="person-id-form" placeholder="Person ID" min="0">
                <button onclick="loadSubtree()">Load Subtree</button>
                <p id="subtree-instructions">Enter a Person ID to view a subtree of four generations only.</p>
            </div>
            <div id="tree"></div>
        </div>
    </div>
    <div id="contact">
        <iframe src="https://forms.gle/FTaWx8NtKmeEcCeCA" width="500px" height="650px"></iframe>
    </div>
    <div id="footer"></div>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'91cfb141be53c004',t:'MTc0MTQwOTIyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>